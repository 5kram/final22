At contracts/MalloryAttack.sol, one can find the malicious contract to trick Bob.
When Bob sends funds to Mallory's contract address, a fallback function is triggered, which calls Bob's pay function. The tx.origin will be Bob's address, so Mallory can easily transfer the balance of his contract to hers.